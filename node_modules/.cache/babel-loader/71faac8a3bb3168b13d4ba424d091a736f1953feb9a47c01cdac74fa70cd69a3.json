{"ast":null,"code":"import _regeneratorRuntime from\"/Users/uvixmi/social-network/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/uvixmi/social-network/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/Users/uvixmi/social-network/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/uvixmi/social-network/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{userAPI,profileAPI}from\"../api/api\";var ADD_POST=\"ADD-POST\";var SET_USER_PROFILE=\"SET_USER_PROFILE\";var SET_STATUS=\"SET_STATUS\";var initialState={posts:[{message:\"Post 1\",likesсount:2},{message:\"Post 1\",likesсount:4},{message:\"Post 1\",likesсount:37},{message:\"Post 1\",likesсount:21},{message:\"Post 1\",likesсount:22}],profile:null,status:\"\"};var profileReducer=function profileReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:{var newPost={id:3423,message:action.newPost,likesсount:0};return _objectSpread(_objectSpread({},state),{},{posts:[].concat(_toConsumableArray(state.posts),[newPost]),newPostText:\"\"});}case SET_USER_PROFILE:{return _objectSpread(_objectSpread({},state),{},{profile:action.profile});}case SET_STATUS:{return _objectSpread(_objectSpread({},state),{},{status:action.status});}default:return state;}};export var addPostActionCreator=function addPostActionCreator(newPost){return{type:ADD_POST,newPost:newPost};};export var setUserProfile=function setUserProfile(profile){return{type:SET_USER_PROFILE,profile:profile};};export var getUserProfile=function getUserProfile(userId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return userAPI.getProfile(userId);case 2:response=_context.sent;dispatch(setUserProfile(response.data));case 4:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getStatus=function getStatus(userId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return profileAPI.getStatus(userId);case 2:response=_context2.sent;dispatch(setStatus(response.data));case 4:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var setStatus=function setStatus(status){return{type:SET_STATUS,status:status};};export var updateStatus=function updateStatus(status){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return profileAPI.updateStatus(status);case 2:response=_context3.sent;if(response.data.resultCode===0)dispatch(setStatus(status));case 4:case\"end\":return _context3.stop();}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export default profileReducer;","map":{"version":3,"names":["userAPI","profileAPI","ADD_POST","SET_USER_PROFILE","SET_STATUS","initialState","posts","message","likesсount","profile","status","profileReducer","state","action","type","newPost","id","newPostText","addPostActionCreator","setUserProfile","getUserProfile","userId","dispatch","getProfile","response","data","getStatus","setStatus","updateStatus","resultCode"],"sources":["/Users/uvixmi/social-network/src/redux/profile_reducer.js"],"sourcesContent":["import { userAPI, profileAPI } from \"../api/api\"\n\nconst ADD_POST = \"ADD-POST\"\n\nconst SET_USER_PROFILE = \"SET_USER_PROFILE\"\nconst SET_STATUS = \"SET_STATUS\"\nlet initialState = {\n  posts: [\n    { message: \"Post 1\", likesсount: 2 },\n    { message: \"Post 1\", likesсount: 4 },\n    { message: \"Post 1\", likesсount: 37 },\n    { message: \"Post 1\", likesсount: 21 },\n    { message: \"Post 1\", likesсount: 22 },\n  ],\n\n  profile: null,\n  status: \"\",\n}\n\nconst profileReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ADD_POST: {\n      let newPost = {\n        id: 3423,\n        message: action.newPost,\n        likesсount: 0,\n      }\n\n      return { ...state, posts: [...state.posts, newPost], newPostText: \"\" }\n    }\n\n    case SET_USER_PROFILE: {\n      return { ...state, profile: action.profile }\n    }\n    case SET_STATUS: {\n      return { ...state, status: action.status }\n    }\n\n    default:\n      return state\n  }\n}\n\nexport const addPostActionCreator = (newPost) => {\n  return {\n    type: ADD_POST,\n    newPost: newPost,\n  }\n}\n\nexport const setUserProfile = (profile) => ({ type: SET_USER_PROFILE, profile })\n\nexport const getUserProfile = (userId) => async (dispatch) => {\n  let response = await userAPI.getProfile(userId)\n  dispatch(setUserProfile(response.data))\n}\n\nexport const getStatus = (userId) => async (dispatch) => {\n  let response = await profileAPI.getStatus(userId)\n  dispatch(setStatus(response.data))\n}\n\nexport const setStatus = (status) => ({ type: SET_STATUS, status })\n\nexport const updateStatus = (status) => async (dispatch) => {\n  let response = await profileAPI.updateStatus(status)\n  if (response.data.resultCode === 0) dispatch(setStatus(status))\n}\n\nexport default profileReducer\n"],"mappings":"+dAAA,OAASA,OAAO,CAAEC,UAAU,KAAQ,YAAY,CAEhD,GAAMC,SAAQ,CAAG,UAAU,CAE3B,GAAMC,iBAAgB,CAAG,kBAAkB,CAC3C,GAAMC,WAAU,CAAG,YAAY,CAC/B,GAAIC,aAAY,CAAG,CACjBC,KAAK,CAAE,CACL,CAAEC,OAAO,CAAE,QAAQ,CAAEC,UAAU,CAAE,CAAE,CAAC,CACpC,CAAED,OAAO,CAAE,QAAQ,CAAEC,UAAU,CAAE,CAAE,CAAC,CACpC,CAAED,OAAO,CAAE,QAAQ,CAAEC,UAAU,CAAE,EAAG,CAAC,CACrC,CAAED,OAAO,CAAE,QAAQ,CAAEC,UAAU,CAAE,EAAG,CAAC,CACrC,CAAED,OAAO,CAAE,QAAQ,CAAEC,UAAU,CAAE,EAAG,CAAC,CACtC,CAEDC,OAAO,CAAE,IAAI,CACbC,MAAM,CAAE,EACV,CAAC,CAED,GAAMC,eAAc,CAAG,QAAjBA,eAAc,EAAqC,IAAjCC,MAAK,2DAAGP,YAAY,IAAEQ,OAAM,2CAClD,OAAQA,MAAM,CAACC,IAAI,EACjB,IAAKZ,SAAQ,CAAE,CACb,GAAIa,QAAO,CAAG,CACZC,EAAE,CAAE,IAAI,CACRT,OAAO,CAAEM,MAAM,CAACE,OAAO,CACvBP,UAAU,CAAE,CACd,CAAC,CAED,sCAAYI,KAAK,MAAEN,KAAK,8BAAMM,KAAK,CAACN,KAAK,GAAES,OAAO,EAAC,CAAEE,WAAW,CAAE,EAAE,GACtE,CAEA,IAAKd,iBAAgB,CAAE,CACrB,sCAAYS,KAAK,MAAEH,OAAO,CAAEI,MAAM,CAACJ,OAAO,GAC5C,CACA,IAAKL,WAAU,CAAE,CACf,sCAAYQ,KAAK,MAAEF,MAAM,CAAEG,MAAM,CAACH,MAAM,GAC1C,CAEA,QACE,MAAOE,MAAK,EAElB,CAAC,CAED,MAAO,IAAMM,qBAAoB,CAAG,QAAvBA,qBAAoB,CAAIH,OAAO,CAAK,CAC/C,MAAO,CACLD,IAAI,CAAEZ,QAAQ,CACda,OAAO,CAAEA,OACX,CAAC,CACH,CAAC,CAED,MAAO,IAAMI,eAAc,CAAG,QAAjBA,eAAc,CAAIV,OAAO,QAAM,CAAEK,IAAI,CAAEX,gBAAgB,CAAEM,OAAO,CAAPA,OAAQ,CAAC,EAAC,CAEhF,MAAO,IAAMW,eAAc,CAAG,QAAjBA,eAAc,CAAIC,MAAM,mGAAK,iBAAOC,QAAQ,sJAClCtB,QAAO,CAACuB,UAAU,CAACF,MAAM,CAAC,QAA3CG,QAAQ,eACZF,QAAQ,CAACH,cAAc,CAACK,QAAQ,CAACC,IAAI,CAAC,CAAC,sDACxC,iEAED,MAAO,IAAMC,UAAS,CAAG,QAAZA,UAAS,CAAIL,MAAM,oGAAK,kBAAOC,QAAQ,2JAC7BrB,WAAU,CAACyB,SAAS,CAACL,MAAM,CAAC,QAA7CG,QAAQ,gBACZF,QAAQ,CAACK,SAAS,CAACH,QAAQ,CAACC,IAAI,CAAC,CAAC,wDACnC,mEAED,MAAO,IAAME,UAAS,CAAG,QAAZA,UAAS,CAAIjB,MAAM,QAAM,CAAEI,IAAI,CAAEV,UAAU,CAAEM,MAAM,CAANA,MAAO,CAAC,EAAC,CAEnE,MAAO,IAAMkB,aAAY,CAAG,QAAfA,aAAY,CAAIlB,MAAM,oGAAK,kBAAOY,QAAQ,2JAChCrB,WAAU,CAAC2B,YAAY,CAAClB,MAAM,CAAC,QAAhDc,QAAQ,gBACZ,GAAIA,QAAQ,CAACC,IAAI,CAACI,UAAU,GAAK,CAAC,CAAEP,QAAQ,CAACK,SAAS,CAACjB,MAAM,CAAC,CAAC,wDAChE,mEAED,cAAeC,eAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}